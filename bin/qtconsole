#! /bin/bash

JAR_NAME="IScala.jar"
JAR_PATH="$(dirname $0)/$JAR_NAME"

if [ ! -e "$JAR_PATH" ]; then
    JAR_PATH="$(pwd)/$JAR_NAME"

    if [ ! -e "$JAR_PATH" ]; then
        echo "$JAR_NAME doesn't exist. Run './sbt assembly' to generate it." >&2
        exit 1
    fi
fi

KERNEL_CMD="[\"java\", \"-jar\", \"$JAR_PATH\", \"--profile\", \"{connection_file}\", \"--parent\", \"$@\"]"

ipython qtconsole --profile scala --KernelManager.kernel_cmd="$KERNEL_CMD"
